{
	servers {
		max_header_size 25MB
		client_ip_headers X-Forwarded-For X-Real-IP
		trusted_proxies static 0.0.0.0/0
	}
}

(plane_proxy) {
  redir /spaces /spaces/ permanent
	reverse_proxy /spaces/* space:3000

  redir /god-mode /god-mode/ permanent
	reverse_proxy /god-mode/* admin:3000
	
	reverse_proxy /live/* live:3000

	reverse_proxy /api/* api:8000

	reverse_proxy /auth/* api:8000

	reverse_proxy /plane-media/* plane-minio:9000
	reverse_proxy /plane-media plane-minio:9000

	reverse_proxy /* web:3000
}

:80 {
	import plane_proxy
}
